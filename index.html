<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Vijay Generator ‚Äî Futuristic Booking</title>

<style>
  :root{
    --bg: #05060a;
    --panel: rgba(255,255,255,0.04);
    --glass: rgba(255,255,255,0.03);
    --muted: #9aa3b2;
    --accent: #6ee7f3;
    --accent-2: #7c5cff;
    --glass-border: rgba(255,255,255,0.06);
  }

  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family: Inter, Arial;
    background: radial-gradient(600px at 50% 10%, rgba(124,92,255,0.06), transparent),
                radial-gradient(600px at 90% 80%, rgba(110,231,243,0.05), transparent),
                var(--bg);
    color:#e6eef7;margin:25px;padding-bottom:40px;
  }

  .wrap{max-width:1000px;margin:auto;display:grid;grid-template-columns:1fr 350px;gap:25px}
  @media(max-width:900px){.wrap{grid-template-columns:1fr}}

  header.site{display:flex;align-items:center;gap:16px;margin-bottom:20px}
  .logo{
    width:70px;height:70px;border-radius:14px;
    background:linear-gradient(135deg,#0ff,#7c5cff);
    display:flex;justify-content:center;align-items:center;
    font-weight:800;font-size:22px;color:#05060a;
    box-shadow:0 0 25px rgba(124,92,255,0.3);
  }
  .brand h1{font-size:22px;margin-bottom:5px}
  .brand p{color:var(--muted);font-size:13px}

  .card{
    background:rgba(255,255,255,0.03);
    border:1px solid var(--glass-border);
    padding:20px;border-radius:14px;
    backdrop-filter:blur(8px);
  }

  .btn{
    background:linear-gradient(90deg,#6ee7f3,#7c5cff);
    padding:12px 18px;border-radius:10px;
    border:none;color:#05060a;font-weight:700;
    cursor:pointer;transition:0.2s;width:100%;
    display:flex;align-items:center;justify-content:center;gap:8px;
  }
  .btn:hover{transform:translateY(-3px);}
  .btn:disabled{
    opacity:0.7;
    cursor:not-allowed;
    transform:none;
  }

  .btn-ghost{
    background:transparent;border:1px solid rgba(255,255,255,0.08);
    padding:12px 18px;border-radius:10px;color:var(--muted);
    cursor:pointer;width:100%;
  }

  /* üîÑ Loading spinner */
  .spinner{
    width:16px;
    height:16px;
    border-radius:50%;
    border:2px solid rgba(255,255,255,0.4);
    border-top-color:#05060a;
    animation: spin 0.7s linear infinite;
  }
  @keyframes spin{
    to{ transform: rotate(360deg); }
  }

  label{font-size:13px;color:var(--muted);margin-bottom:6px;display:block}
  input,select,textarea{
    width:100%;padding:12px;border-radius:10px;
    border:1px solid rgba(255,255,255,0.1);
    background:rgba(255,255,255,0.02);
    color:#e7f6fc;font-size:14px;
  }
  input:focus,select:focus,textarea:focus{
    border-color:#6ee7f3;outline:none;
    box-shadow:0 0 10px rgba(110,231,243,0.2);
  }

  .row{display:flex;gap:12px;margin-bottom:15px}
  .col{flex:1}

  .msg{display:none;padding:10px;border-radius:10px;margin-bottom:12px;font-size:14px}
  .success{background:rgba(0,255,200,0.08);border:1px solid rgba(0,255,200,0.15);color:#b7fff0}
  .error{background:rgba(255,80,80,0.08);border:1px solid rgba(255,80,80,0.15);color:#ffbaba}

  footer{text-align:center;margin-top:25px;color:var(--muted);font-size:13px;margin-bottom:15px}
</style>
</head>
<body>

<header class="site">
  <div class="logo">VG</div>
  <div class="brand">
    <h1>Vijay Generator</h1>
    <p>Futuristic Generator Booking Portal</p>
  </div>
</header>

<div class="wrap">

  <!-- LEFT FORM -->
  <div class="card">

    <h2 style="margin-bottom:15px;">Book a Generator</h2>

    <div id="successMsg" class="msg success"></div>
    <div id="errorMsg" class="msg error"></div>

    <form id="bookingForm">

      <div class="row">
        <div class="col">
          <label>Genset Model</label>
          <select id="model" required>
            <option value="">Select Model</option>
            <option>5 kW</option>
            <option>7.5 kW</option>
            <option>20 kW</option>
            <option>30 kW</option>
            <option>40 kW</option>
          </select>
        </div>

        <div style="width:150px">
          <label>Date</label>
          <input type="date" id="date" required />
        </div>

        <div style="width:120px">
          <label>Time</label>
          <input type="time" id="time" required />
        </div>
      </div>

      <div class="row">
        <div class="col">
          <label>Full Name</label>
          <input type="text" id="name" placeholder="Your name" required>
        </div>

        <div style="width:200px;">
          <label>Phone</label>
          <input type="text" id="phone" placeholder="9876543210" required>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <label>Email (optional)</label>
          <input type="email" id="email" placeholder="email@example.com">
        </div>

        <div class="col">
          <label>Location</label>
          <input id="location" placeholder="City / Site Address" required>
        </div>
      </div>

      <div class="row">
        <div style="width:120px;">
          <label>Quantity</label>
          <select id="qty">
            <option>1</option><option>2</option><option>3</option><option>4</option>
          </select>
        </div>

        <div class="col">
          <label>Message (optional)</label>
          <textarea id="msgInput" placeholder="Special requirements..."></textarea>
        </div>
      </div>

      <!-- üîÅ Button with loader -->
      <button class="btn" id="submitBtn" style="margin-top:10px;">
        <span id="btnText">üöÄ Confirm Booking</span>
        <span id="btnSpinner" class="spinner" style="display:none;"></span>
      </button>
    </form>
  </div>

  <!-- RIGHT PANEL -->
  <div class="card">
    <h3>Why Choose Us</h3>
    <p style="color:var(--muted);margin:10px 0">Reliable & professional genset solutions.</p>
    <ul style="line-height:1.7;color:var(--muted);font-size:14px;margin-left:15px;">
      <li>High efficiency generators</li>
      <li>Low-noise operation</li>
      <li>Fast delivery & setup</li>
      <li>On-site support</li>
      <li>Trusted service</li>
    </ul>

    <button class="btn" style="margin-top:20px;" onclick="window.location.href='tel:+919838902457'">üìû Call Us</button>
    <button class="btn-ghost" style="margin-top:12px;" onclick="window.open('https://www.google.com/maps/search/?api=1&query=Vijay+Generator','_blank')">üìç Open in Maps</button>
  </div>

</div>

<footer>
¬© 2025 Vijay Generator ‚Äî Futuristic Booking Portal
</footer>

<script>
const API_URL = "https://vijay-generator-server.onrender.com/book";

const form = document.getElementById("bookingForm");
const successMsg = document.getElementById("successMsg");
const errorMsg = document.getElementById("errorMsg");

const submitBtn = document.getElementById("submitBtn");
const btnText = document.getElementById("btnText");
const btnSpinner = document.getElementById("btnSpinner");

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const data = {
    model: model.value,
    date: date.value,
    time: time.value,
    name: name.value.trim(),
    phone: phone.value.trim(),
    email: email.value.trim(),
    location: location.value.trim(),
    qty: qty.value,
    message: msgInput.value.trim()
  };

  if (!data.model || !data.date || !data.time || !data.name || !data.phone || !data.location) {
    errorMsg.textContent = "Please fill all required fields.";
    errorMsg.style.display = "block";
    successMsg.style.display = "none";
    return;
  }

  // üîÑ Show loading spinner
  submitBtn.disabled = true;
  btnText.textContent = "Processing...";
  btnSpinner.style.display = "inline-block";

  try {
    const res = await fetch(API_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    if (res.ok) {
      successMsg.textContent = "Booking submitted successfully!";
      successMsg.style.display = "block";
      errorMsg.style.display = "none";
      form.reset();
    } else {
      errorMsg.textContent = "Server error. Try again later.";
      errorMsg.style.display = "block";
      successMsg.style.display = "none";
    }
  } catch (err) {
    errorMsg.textContent = "Network error. Check connection.";
    errorMsg.style.display = "block";
    successMsg.style.display = "none";
  } finally {
    // üîÅ Reset button state
    submitBtn.disabled = false;
    btnText.textContent = "üöÄ Confirm Booking";
    btnSpinner.style.display = "none";
  }
});
</script>

</body>
</html>
